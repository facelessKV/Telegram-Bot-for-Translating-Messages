# Инструкция по установке и запуску Telegram-бота переводчика

## Содержание

1. [Установка Python](#1-установка-python)
   - [Windows](#windows)
   - [Linux](#linux)
2. [Скачивание кода бота](#2-скачивание-кода-бота)
3. [Настройка виртуального окружения](#3-настройка-виртуального-окружения)
   - [Windows](#windows-1)
   - [Linux](#linux-1)
4. [Установка зависимостей](#4-установка-зависимостей)
   - [Windows](#windows-2)
   - [Linux](#linux-2)
5. [Получение токенов](#5-получение-токенов)
   - [Токен Telegram бота](#токен-telegram-бота)
   - [API ключ для перевода](#api-ключ-для-перевода)
6. [Настройка бота](#6-настройка-бота)
7. [Запуск бота](#7-запуск-бота)
   - [Windows](#windows-3)
   - [Linux](#linux-3)
8. [Использование бота](#8-использование-бота)
9. [Решение проблем](#9-решение-проблем)

## 1. Установка Python

### Windows

1. Скачайте Python 3.9.7 (рекомендуемая версия) с официального сайта: https://www.python.org/downloads/release/python-397/ 
   - Прокрутите вниз и выберите "Windows installer (64-bit)"

2. Запустите установщик и обязательно установите галочку "Add Python 3.9 to PATH"
   - Нажмите "Install Now" для стандартной установки

3. После установки проверьте, что Python успешно установлен:
   - Откройте командную строку (нажмите Win+R, введите cmd и нажмите Enter)
   - Введите команду: `python --version`
   - Вы должны увидеть что-то вроде: `Python 3.9.7`

### Linux

1. Большинство дистрибутивов Linux уже содержат Python, но рекомендуется установить Python 3.9:

   **Ubuntu/Debian:**
   ```
   sudo apt update
   sudo apt install software-properties-common
   sudo add-apt-repository ppa:deadsnakes/ppa
   sudo apt update
   sudo apt install python3.9 python3.9-venv python3.9-dev
   ```

   **CentOS/RHEL:**
   ```
   sudo yum install -y gcc openssl-devel bzip2-devel libffi-devel
   wget https://www.python.org/ftp/python/3.9.7/Python-3.9.7.tgz
   tar xzf Python-3.9.7.tgz
   cd Python-3.9.7
   ./configure --enable-optimizations
   sudo make altinstall
   ```

2. Проверьте установку командой:
   ```
   python3.9 --version
   ```

## 2. Скачивание кода бота

1. Создайте папку, где будет находиться ваш бот.

   **Windows:**
   - Откройте проводник (Win+E)
   - Перейдите в место, где хотите создать папку (например, C:\Bots)
   - Создайте новую папку с названием "TranslatorBot"

   **Linux:**
   ```
   mkdir -p ~/TranslatorBot
   cd ~/TranslatorBot
   ```

2. Скопируйте файл бота (bot.py) в эту папку.

## 3. Настройка виртуального окружения

Виртуальное окружение позволяет изолировать зависимости бота от других программ.

### Windows

1. Откройте командную строку от имени администратора:
   - Нажмите Win
   - Введите "cmd"
   - Правой кнопкой по "Командная строка"
   - Выберите "Запустить от имени администратора"

2. Перейдите в папку с ботом:
   ```
   cd C:\путь\к\вашей\папке\TranslatorBot
   ```

3. Создайте виртуальное окружение:
   ```
   python -m venv venv
   ```

4. Активируйте виртуальное окружение:
   ```
   venv\Scripts\activate
   ```
   
   Теперь в начале строки должно появиться `(venv)`, что означает активацию виртуального окружения.

### Linux

1. Откройте терминал и перейдите в папку с ботом:
   ```
   cd ~/TranslatorBot
   ```

2. Создайте виртуальное окружение:
   ```
   python3.9 -m venv venv
   ```

3. Активируйте виртуальное окружение:
   ```
   source venv/bin/activate
   ```

## 4. Установка зависимостей

### Windows

1. Убедитесь, что виртуальное окружение активировано (в начале строки должно быть `(venv)`).

2. Установите необходимые библиотеки:
   ```
   pip install aiogram>=3.0.0 httpx
   ```

### Linux

1. Убедитесь, что виртуальное окружение активировано (в начале строки должно быть `(venv)`).

2. Обновите pip:
   ```
   pip install --upgrade pip
   ```

3. Установите необходимые библиотеки:
   ```
   pip install aiogram>=3.0.0 httpx
   ```

## 5. Получение токенов

Вам потребуются два токена: для Telegram бота и для API перевода.

### Токен Telegram бота

1. Откройте Telegram и найдите @BotFather.

2. Отправьте сообщение `/newbot`.

3. Следуйте инструкциям:
   - Введите имя бота (например, "Мой Переводчик")
   - Введите уникальное имя пользователя для бота (должно заканчиваться на "bot", например, "my_translator_bot")

4. После создания бота вы получите токен, похожий на:
   ```
   5555555555:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
   ```

5. Сохраните этот токен в надежном месте.

### API ключ для перевода

Для Google Translate API:

1. Перейдите на Google Cloud Console: https://console.cloud.google.com/

2. Создайте новый проект.

3. Включите Google Cloud Translation API для вашего проекта.

4. Создайте ключ API в разделе "Credentials".

5. Сохраните полученный ключ.

## 6. Настройка бота

1. Откройте файл бота (bot.py) в любом текстовом редакторе:
   - Windows: можно использовать Блокнот (Notepad) или другой редактор
   - Linux: можно использовать nano, vim или gedit

2. Найдите строки:
   ```python
   API_TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'
   TRANSLATE_API_KEY = 'YOUR_TRANSLATE_API_KEY'
   ```

3. Замените 'YOUR_TELEGRAM_BOT_TOKEN' на токен, полученный от BotFather.

4. Замените 'YOUR_TRANSLATE_API_KEY' на ключ API перевода, который вы получили.

5. Сохраните файл.

## 7. Запуск бота

### Windows

1. Убедитесь, что вы находитесь в папке с ботом и виртуальное окружение активировано.

2. Запустите бота командой:
   ```
   python bot.py
   ```

3. Если всё настроено правильно, вы увидите логи запуска бота.

### Linux

1. Убедитесь, что вы находитесь в папке с ботом и виртуальное окружение активировано.

2. Запустите бота командой:
   ```
   python3 bot.py
   ```

3. Для запуска бота в фоновом режиме (чтобы он продолжал работать после закрытия терминала):
   ```
   nohup python3 bot.py > bot.log 2>&1 &
   ```

## 8. Использование бота

1. Найдите вашего бота в Telegram по имени, которое вы указали при создании.

2. Отправьте команду `/start`, чтобы получить приветственное сообщение и информацию о доступных командах.

3. Используйте следующие команды:
   - `/translate` — запрос на перевод текста
   - `/set_lang` — изменение языка перевода
   - Или просто отправьте любой текст, и бот автоматически определит язык и переведет его

## 9. Решение проблем

**Проблема:** При запуске бота появляется ошибка "No module named 'aiogram'".
**Решение:** Убедитесь, что вы активировали виртуальное окружение и установили все зависимости (`pip install aiogram>=3.0.0 httpx`).

**Проблема:** Ошибка "Invalid token" при запуске бота.
**Решение:** Проверьте, правильно ли вы скопировали токен от BotFather в файл bot.py.

**Проблема:** Ошибка "Unauthorized" при попытке перевести текст.
**Решение:** Проверьте правильность API ключа для перевода и убедитесь, что API активирован в консоли Google Cloud.

**Проблема:** Бот не отвечает на команды.
**Решение:** Проверьте логи запуска бота на наличие ошибок. Убедитесь, что бот запущен и работает.

---

Если у вас возникли вопросы или проблемы, не указанные в этой инструкции, обратитесь к документации aiogram: https://docs.aiogram.dev/